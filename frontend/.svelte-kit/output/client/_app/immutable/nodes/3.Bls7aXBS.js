import{s as Kr,n as yl,d as u,z as Rr,r as jr,m as s,q as F,a as R,u as qr,v as mr,i as G,b as r,l as J,w as Gl,x as zr,c as n,e as c,f as A,g as p,o as S,h as i,t as N,j as h,k as Wr,p as Yr,C as Gr,y as Jr,J as vr,K as yr,B as Qr}from"../chunks/cb-04oXe.js";import{e as kl}from"../chunks/D6DogDNs.js";import{S as Xr,i as Zr}from"../chunks/BeocxfxK.js";import{b as Kt}from"../chunks/B5Gh6ECd.js";import{a as $r,d as es,o as ts,b as dt,e as kt}from"../chunks/C7KyscHc.js";function St(e,l=2){return new Intl.NumberFormat("en-IN",{style:"decimal",minimumFractionDigits:l,maximumFractionDigits:l}).format(e)}function kr(e,l,t){const o=e.slice();return o[63]=l[t],o}function wr(e,l,t){const o=e.slice();return o[66]=l[t],o[68]=t,o}function Er(e){let l,t;return{c(){l=i("div"),t=N(e[7]),this.h()},l(o){l=n(o,"DIV",{class:!0});var a=c(l);t=A(a,e[7]),a.forEach(u),this.h()},h(){s(l,"class","bg-green-50 border border-green-200 text-green-800 p-4 rounded-lg mb-4")},m(o,a){G(o,l,a),r(l,t)},p(o,a){a[0]&128&&R(t,o[7])},d(o){o&&u(l)}}}function Cr(e){let l,t;return{c(){l=i("div"),t=N(e[6]),this.h()},l(o){l=n(o,"DIV",{class:!0});var a=c(l);t=A(a,e[6]),a.forEach(u),this.h()},h(){s(l,"class","bg-red-50 border border-red-200 text-red-800 p-4 rounded-lg mb-4")},m(o,a){G(o,l,a),r(l,t)},p(o,a){a[0]&64&&R(t,o[6])},d(o){o&&u(l)}}}function ls(e){let l,t,o;return{c(){l=i("input"),this.h()},l(a){l=n(a,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),this.h()},h(){s(l,"id","api-secret"),s(l,"type","password"),l.required=!0,s(l,"placeholder","Enter your Kite API Secret"),s(l,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10")},m(a,d){G(a,l,d),F(l,e[9].api_secret),t||(o=J(l,"input",e[34]),t=!0)},p(a,d){d[0]&512&&l.value!==a[9].api_secret&&F(l,a[9].api_secret)},d(a){a&&u(l),t=!1,o()}}}function rs(e){let l,t,o;return{c(){l=i("input"),this.h()},l(a){l=n(a,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),this.h()},h(){s(l,"id","api-secret"),s(l,"type","text"),l.required=!0,s(l,"placeholder","Enter your Kite API Secret"),s(l,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10")},m(a,d){G(a,l,d),F(l,e[9].api_secret),t||(o=J(l,"input",e[33]),t=!0)},p(a,d){d[0]&512&&l.value!==a[9].api_secret&&F(l,a[9].api_secret)},d(a){a&&u(l),t=!1,o()}}}function Ir(e){let l,t;return{c(){l=i("div"),t=N(e[13]),this.h()},l(o){l=n(o,"DIV",{class:!0});var a=c(l);t=A(a,e[13]),a.forEach(u),this.h()},h(){s(l,"class","bg-green-50 border border-green-200 text-green-800 p-4 rounded-lg mb-4")},m(o,a){G(o,l,a),r(l,t)},p(o,a){a[0]&8192&&R(t,o[13])},d(o){o&&u(l)}}}function Dr(e){let l,t;return{c(){l=i("div"),t=N(e[14]),this.h()},l(o){l=n(o,"DIV",{class:!0});var a=c(l);t=A(a,e[14]),a.forEach(u),this.h()},h(){s(l,"class","bg-red-50 border border-red-200 text-red-800 p-4 rounded-lg mb-4")},m(o,a){G(o,l,a),r(l,t)},p(o,a){a[0]&16384&&R(t,o[14])},d(o){o&&u(l)}}}function xr(e){let l,t=e[66]+"",o,a,d,m,w;function g(){return e[40](e[68])}return{c(){l=i("button"),o=N(t),a=h(),this.h()},l(_){l=n(_,"BUTTON",{type:!0,class:!0});var y=c(l);o=A(y,t),a=p(y),y.forEach(u),this.h()},h(){s(l,"type","button"),s(l,"class",d="px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(e[11].trading_days.includes(e[68])?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"))},m(_,y){G(_,l,y),r(l,o),r(l,a),m||(w=J(l,"click",g),m=!0)},p(_,y){e=_,y[0]&2048&&d!==(d="px-4 py-2 rounded-lg text-sm font-medium transition-colors "+(e[11].trading_days.includes(e[68])?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"))&&s(l,"class",d)},d(_){_&&u(l),m=!1,w()}}}function Tr(e){let l,t;return{c(){l=i("div"),t=N(e[18]),this.h()},l(o){l=n(o,"DIV",{class:!0});var a=c(l);t=A(a,e[18]),a.forEach(u),this.h()},h(){s(l,"class","bg-green-50 border border-green-200 text-green-800 p-4 rounded-lg mb-4")},m(o,a){G(o,l,a),r(l,t)},p(o,a){a[0]&262144&&R(t,o[18])},d(o){o&&u(l)}}}function Vr(e){let l,t;return{c(){l=i("div"),t=N(e[17]),this.h()},l(o){l=n(o,"DIV",{class:!0});var a=c(l);t=A(a,e[17]),a.forEach(u),this.h()},h(){s(l,"class","bg-red-50 border border-red-200 text-red-800 p-4 rounded-lg mb-4")},m(o,a){G(o,l,a),r(l,t)},p(o,a){a[0]&131072&&R(t,o[17])},d(o){o&&u(l)}}}function Lr(e){let l,t,o="Add New Holiday",a,d,m,w,g,_='Date <span class="text-red-500">*</span>',y,v,C,E,I,b='Holiday Name <span class="text-red-500">*</span>',f,T,L,D,x,B="Description (Optional)",H,j,_e,M,U,W=e[16]?"Adding...":"Add Holiday",Z,me,q,Ee="Cancel",ve,Ze;return{c(){l=i("div"),t=i("h3"),t.textContent=o,a=h(),d=i("form"),m=i("div"),w=i("div"),g=i("label"),g.innerHTML=_,y=h(),v=i("input"),C=h(),E=i("div"),I=i("label"),I.innerHTML=b,f=h(),T=i("input"),L=h(),D=i("div"),x=i("label"),x.textContent=B,H=h(),j=i("input"),_e=h(),M=i("div"),U=i("button"),Z=N(W),me=h(),q=i("button"),q.textContent=Ee,this.h()},l(Q){l=n(Q,"DIV",{class:!0});var K=c(l);t=n(K,"H3",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1j5tr0s"&&(t.textContent=o),a=p(K),d=n(K,"FORM",{class:!0});var Ce=c(d);m=n(Ce,"DIV",{class:!0});var ye=c(m);w=n(ye,"DIV",{});var be=c(w);g=n(be,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),S(g)!=="svelte-7jqgti"&&(g.innerHTML=_),y=p(be),v=n(be,"INPUT",{id:!0,type:!0,class:!0}),be.forEach(u),C=p(ye),E=n(ye,"DIV",{});var Re=c(E);I=n(Re,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),S(I)!=="svelte-1t3wg42"&&(I.innerHTML=b),f=p(Re),T=n(Re,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Re.forEach(u),ye.forEach(u),L=p(Ce),D=n(Ce,"DIV",{});var xe=c(D);x=n(xe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),S(x)!=="svelte-1hr4zh2"&&(x.textContent=B),H=p(xe),j=n(xe,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),xe.forEach(u),_e=p(Ce),M=n(Ce,"DIV",{class:!0});var X=c(M);U=n(X,"BUTTON",{type:!0,class:!0});var $e=c(U);Z=A($e,W),$e.forEach(u),me=p(X),q=n(X,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),S(q)!=="svelte-1nymysh"&&(q.textContent=Ee),X.forEach(u),Ce.forEach(u),K.forEach(u),this.h()},h(){s(t,"class","text-lg font-semibold mb-3 text-gray-900"),s(g,"for","holiday-date"),s(g,"class","block text-sm font-medium text-gray-700 mb-1"),s(v,"id","holiday-date"),s(v,"type","date"),v.required=!0,s(v,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"),s(I,"for","holiday-name"),s(I,"class","block text-sm font-medium text-gray-700 mb-1"),s(T,"id","holiday-name"),s(T,"type","text"),s(T,"placeholder","e.g., Independence Day"),T.required=!0,s(T,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"),s(m,"class","grid grid-cols-2 gap-4"),s(x,"for","holiday-description"),s(x,"class","block text-sm font-medium text-gray-700 mb-1"),s(j,"id","holiday-description"),s(j,"type","text"),s(j,"placeholder","Additional notes about this holiday"),s(j,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"),s(U,"type","submit"),U.disabled=e[16],s(U,"class","px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50"),s(q,"type","button"),s(q,"class","px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"),s(M,"class","flex gap-3"),s(d,"class","space-y-4"),s(l,"class","bg-gray-50 rounded-lg p-4 mb-4 border border-gray-200")},m(Q,K){G(Q,l,K),r(l,t),r(l,a),r(l,d),r(d,m),r(m,w),r(w,g),r(w,y),r(w,v),F(v,e[21].date),r(m,C),r(m,E),r(E,I),r(E,f),r(E,T),F(T,e[21].name),r(d,L),r(d,D),r(D,x),r(D,H),r(D,j),F(j,e[21].description),r(d,_e),r(d,M),r(M,U),r(U,Z),r(M,me),r(M,q),ve||(Ze=[J(v,"input",e[45]),J(T,"input",e[46]),J(j,"input",e[47]),J(q,"click",e[48]),J(d,"submit",Gl(e[28]))],ve=!0)},p(Q,K){K[0]&2097152&&F(v,Q[21].date),K[0]&2097152&&T.value!==Q[21].name&&F(T,Q[21].name),K[0]&2097152&&j.value!==Q[21].description&&F(j,Q[21].description),K[0]&65536&&W!==(W=Q[16]?"Adding...":"Add Holiday")&&R(Z,W),K[0]&65536&&(U.disabled=Q[16])},d(Q){Q&&u(l),ve=!1,jr(Ze)}}}function ss(e){let l,t,o,a=e[15].length+"",d,m,w=e[15].length!==1?"s":"",g,_,y,v=kl(e[15]),C=[];for(let E=0;E<v.length;E+=1)C[E]=Hr(kr(e,v,E));return{c(){l=i("div"),t=i("div"),o=N("Total: "),d=N(a),m=N(" holiday"),g=N(w),_=h(),y=i("div");for(let E=0;E<C.length;E+=1)C[E].c();this.h()},l(E){l=n(E,"DIV",{class:!0});var I=c(l);t=n(I,"DIV",{class:!0});var b=c(t);o=A(b,"Total: "),d=A(b,a),m=A(b," holiday"),g=A(b,w),b.forEach(u),_=p(I),y=n(I,"DIV",{class:!0});var f=c(y);for(let T=0;T<C.length;T+=1)C[T].l(f);f.forEach(u),I.forEach(u),this.h()},h(){s(t,"class","text-sm text-gray-600 mb-2"),s(y,"class","max-h-96 overflow-y-auto"),s(l,"class","space-y-2")},m(E,I){G(E,l,I),r(l,t),r(t,o),r(t,d),r(t,m),r(t,g),r(l,_),r(l,y);for(let b=0;b<C.length;b+=1)C[b]&&C[b].m(y,null)},p(E,I){if(I[0]&32768&&a!==(a=E[15].length+"")&&R(d,a),I[0]&32768&&w!==(w=E[15].length!==1?"s":"")&&R(g,w),I[0]&536969216){v=kl(E[15]);let b;for(b=0;b<v.length;b+=1){const f=kr(E,v,b);C[b]?C[b].p(f,I):(C[b]=Hr(f),C[b].c(),C[b].m(y,null))}for(;b<C.length;b+=1)C[b].d(1);C.length=v.length}},d(E){E&&u(l),Rr(C,E)}}}function os(e){let l,t,o,a,d,m,w;return{c(){l=i("div"),t=yr("svg"),o=yr("path"),a=h(),d=i("p"),m=N("No holidays found for "),w=N(e[19]),this.h()},l(g){l=n(g,"DIV",{class:!0});var _=c(l);t=vr(_,"svg",{class:!0,fill:!0,stroke:!0,viewBox:!0});var y=c(t);o=vr(y,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),c(o).forEach(u),y.forEach(u),a=p(_),d=n(_,"P",{class:!0});var v=c(d);m=A(v,"No holidays found for "),w=A(v,e[19]),v.forEach(u),_.forEach(u),this.h()},h(){s(o,"stroke-linecap","round"),s(o,"stroke-linejoin","round"),s(o,"stroke-width","2"),s(o,"d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"),s(t,"class","mx-auto h-12 w-12 text-gray-400"),s(t,"fill","none"),s(t,"stroke","currentColor"),s(t,"viewBox","0 0 24 24"),s(d,"class","mt-2"),s(l,"class","text-center py-8 text-gray-500")},m(g,_){G(g,l,_),r(l,t),r(t,o),r(l,a),r(l,d),r(d,m),r(d,w)},p(g,_){_[0]&524288&&R(w,g[19])},d(g){g&&u(l)}}}function as(e){let l,t='<div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <p class="text-gray-600 mt-2">Loading holidays...</p>';return{c(){l=i("div"),l.innerHTML=t,this.h()},l(o){l=n(o,"DIV",{class:!0,"data-svelte-h":!0}),S(l)!=="svelte-thczkj"&&(l.innerHTML=t),this.h()},h(){s(l,"class","text-center py-8")},m(o,a){G(o,l,a)},p:yl,d(o){o&&u(l)}}}function Pr(e){let l,t=e[63].description+"",o;return{c(){l=i("div"),o=N(t),this.h()},l(a){l=n(a,"DIV",{class:!0});var d=c(l);o=A(d,t),d.forEach(u),this.h()},h(){s(l,"class","text-sm text-gray-600")},m(a,d){G(a,l,d),r(l,o)},p(a,d){d[0]&32768&&t!==(t=a[63].description+"")&&R(o,t)},d(a){a&&u(l)}}}function Hr(e){let l,t,o,a,d=Or(e[63].date)+"",m,w,g,_,y=e[63].name+"",v,C,E,I,b,f,T,L,D=e[63].description&&Pr(e);function x(){return e[49](e[63])}return{c(){l=i("div"),t=i("div"),o=i("div"),a=i("div"),m=N(d),w=h(),g=i("div"),_=i("div"),v=N(y),C=h(),D&&D.c(),E=h(),I=i("button"),b=N("üóëÔ∏è Delete"),f=h(),this.h()},l(B){l=n(B,"DIV",{class:!0});var H=c(l);t=n(H,"DIV",{class:!0});var j=c(t);o=n(j,"DIV",{class:!0});var _e=c(o);a=n(_e,"DIV",{class:!0});var M=c(a);m=A(M,d),M.forEach(u),w=p(_e),g=n(_e,"DIV",{class:!0});var U=c(g);_=n(U,"DIV",{class:!0});var W=c(_);v=A(W,y),W.forEach(u),C=p(U),D&&D.l(U),U.forEach(u),_e.forEach(u),j.forEach(u),E=p(H),I=n(H,"BUTTON",{class:!0,title:!0});var Z=c(I);b=A(Z,"üóëÔ∏è Delete"),Z.forEach(u),f=p(H),H.forEach(u),this.h()},h(){s(a,"class","text-sm font-medium text-gray-500 min-w-[120px]"),s(_,"class","font-semibold text-gray-900"),s(g,"class","flex-1"),s(o,"class","flex items-center gap-3"),s(t,"class","flex-1"),I.disabled=e[16],s(I,"class","ml-4 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 text-sm"),s(I,"title","Delete holiday"),s(l,"class","flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors border border-gray-200 mb-2")},m(B,H){G(B,l,H),r(l,t),r(t,o),r(o,a),r(a,m),r(o,w),r(o,g),r(g,_),r(_,v),r(g,C),D&&D.m(g,null),r(l,E),r(l,I),r(I,b),r(l,f),T||(L=J(I,"click",x),T=!0)},p(B,H){e=B,H[0]&32768&&d!==(d=Or(e[63].date)+"")&&R(m,d),H[0]&32768&&y!==(y=e[63].name+"")&&R(v,y),e[63].description?D?D.p(e,H):(D=Pr(e),D.c(),D.m(g,null)):D&&(D.d(1),D=null),H[0]&65536&&(I.disabled=e[16])},d(B){B&&u(l),D&&D.d(),T=!1,L()}}}function Ar(e){let l,t;return{c(){l=i("div"),this.h()},l(o){l=n(o,"DIV",{class:!0}),c(l).forEach(u),this.h()},h(){s(l,"class",t="w-3 h-3 rounded-full "+(e[1].downloaded_today?"bg-green-500":"bg-red-500"))},m(o,a){G(o,l,a)},p(o,a){a[0]&2&&t!==(t="w-3 h-3 rounded-full "+(o[1].downloaded_today?"bg-green-500":"bg-red-500"))&&s(l,"class",t)},d(o){o&&u(l)}}}function Nr(e){let l,t;return{c(){l=i("div"),t=N(e[4]),this.h()},l(o){l=n(o,"DIV",{class:!0});var a=c(l);t=A(a,e[4]),a.forEach(u),this.h()},h(){s(l,"class","bg-green-50 border border-green-200 text-green-800 p-4 rounded-lg mb-4 text-sm")},m(o,a){G(o,l,a),r(l,t)},p(o,a){a[0]&16&&R(t,o[4])},d(o){o&&u(l)}}}function Sr(e){let l,t;return{c(){l=i("div"),t=N(e[3]),this.h()},l(o){l=n(o,"DIV",{class:!0});var a=c(l);t=A(a,e[3]),a.forEach(u),this.h()},h(){s(l,"class","bg-red-50 border border-red-200 text-red-800 p-4 rounded-lg mb-4 text-sm")},m(o,a){G(o,l,a),r(l,t)},p(o,a){a[0]&8&&R(t,o[3])},d(o){o&&u(l)}}}function ns(e){var T;let l,t,o,a="Total Instruments",d,m,w=(((T=e[1].count)==null?void 0:T.toLocaleString())||0)+"",g,_,y,v,C="Last Downloaded",E,I,b=Fr(e[1].last_download)+"",f;return{c(){l=i("div"),t=i("div"),o=i("p"),o.textContent=a,d=h(),m=i("p"),g=N(w),_=h(),y=i("div"),v=i("p"),v.textContent=C,E=h(),I=i("p"),f=N(b),this.h()},l(L){l=n(L,"DIV",{class:!0});var D=c(l);t=n(D,"DIV",{});var x=c(t);o=n(x,"P",{class:!0,"data-svelte-h":!0}),S(o)!=="svelte-fz8ek0"&&(o.textContent=a),d=p(x),m=n(x,"P",{class:!0});var B=c(m);g=A(B,w),B.forEach(u),x.forEach(u),_=p(D),y=n(D,"DIV",{});var H=c(y);v=n(H,"P",{class:!0,"data-svelte-h":!0}),S(v)!=="svelte-1aw4t59"&&(v.textContent=C),E=p(H),I=n(H,"P",{class:!0});var j=c(I);f=A(j,b),j.forEach(u),H.forEach(u),D.forEach(u),this.h()},h(){s(o,"class","text-sm font-medium text-gray-600"),s(m,"class","text-xl font-bold text-gray-900"),s(v,"class","text-sm font-medium text-gray-600"),s(I,"class","text-sm text-gray-700"),s(l,"class","flex gap-6")},m(L,D){G(L,l,D),r(l,t),r(t,o),r(t,d),r(t,m),r(m,g),r(l,_),r(l,y),r(y,v),r(y,E),r(y,I),r(I,f)},p(L,D){var x;D[0]&2&&w!==(w=(((x=L[1].count)==null?void 0:x.toLocaleString())||0)+"")&&R(g,w),D[0]&2&&b!==(b=Fr(L[1].last_download)+"")&&R(f,b)},d(L){L&&u(l)}}}function is(e){let l,t='<div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <p class="text-gray-600 mt-2">Loading...</p>';return{c(){l=i("div"),l.innerHTML=t,this.h()},l(o){l=n(o,"DIV",{class:!0,"data-svelte-h":!0}),S(l)!=="svelte-1vehlu2"&&(l.innerHTML=t),this.h()},h(){s(l,"class","text-center py-8")},m(o,a){G(o,l,a)},p:yl,d(o){o&&u(l)}}}function Br(e){let l,t,o="üí∞ Fund Summary",a,d,m,w,g="Available Balance",_,y,v=St(e[0].available_balance)+"",C,E,I,b=e[0].used_margin&&Mr(e),f=e[0].net&&Ur(e);return{c(){l=i("div"),t=i("h2"),t.textContent=o,a=h(),d=i("div"),m=i("div"),w=i("p"),w.textContent=g,_=h(),y=i("p"),C=N(v),E=h(),b&&b.c(),I=h(),f&&f.c(),this.h()},l(T){l=n(T,"DIV",{class:!0});var L=c(l);t=n(L,"H2",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1lnm3k"&&(t.textContent=o),a=p(L),d=n(L,"DIV",{class:!0});var D=c(d);m=n(D,"DIV",{});var x=c(m);w=n(x,"P",{class:!0,"data-svelte-h":!0}),S(w)!=="svelte-v05t4j"&&(w.textContent=g),_=p(x),y=n(x,"P",{class:!0});var B=c(y);C=A(B,v),B.forEach(u),x.forEach(u),E=p(D),b&&b.l(D),I=p(D),f&&f.l(D),D.forEach(u),L.forEach(u),this.h()},h(){s(t,"class","text-lg font-bold text-gray-900 mb-4"),s(w,"class","text-sm font-medium text-gray-600"),s(y,"class","text-2xl font-bold text-gray-900"),s(d,"class","space-y-3"),s(l,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow")},m(T,L){G(T,l,L),r(l,t),r(l,a),r(l,d),r(d,m),r(m,w),r(m,_),r(m,y),r(y,C),r(d,E),b&&b.m(d,null),r(d,I),f&&f.m(d,null)},p(T,L){L[0]&1&&v!==(v=St(T[0].available_balance)+"")&&R(C,v),T[0].used_margin?b?b.p(T,L):(b=Mr(T),b.c(),b.m(d,I)):b&&(b.d(1),b=null),T[0].net?f?f.p(T,L):(f=Ur(T),f.c(),f.m(d,null)):f&&(f.d(1),f=null)},d(T){T&&u(l),b&&b.d(),f&&f.d()}}}function Mr(e){let l,t,o="Used Margin",a,d,m=St(e[0].used_margin)+"",w;return{c(){l=i("div"),t=i("p"),t.textContent=o,a=h(),d=i("p"),w=N(m),this.h()},l(g){l=n(g,"DIV",{});var _=c(l);t=n(_,"P",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1t59k4p"&&(t.textContent=o),a=p(_),d=n(_,"P",{class:!0});var y=c(d);w=A(y,m),y.forEach(u),_.forEach(u),this.h()},h(){s(t,"class","text-sm font-medium text-gray-600"),s(d,"class","text-lg font-semibold text-gray-700")},m(g,_){G(g,l,_),r(l,t),r(l,a),r(l,d),r(d,w)},p(g,_){_[0]&1&&m!==(m=St(g[0].used_margin)+"")&&R(w,m)},d(g){g&&u(l)}}}function Ur(e){let l,t,o="Net Value",a,d,m=St(e[0].net)+"",w;return{c(){l=i("div"),t=i("p"),t.textContent=o,a=h(),d=i("p"),w=N(m),this.h()},l(g){l=n(g,"DIV",{});var _=c(l);t=n(_,"P",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1g9ozpq"&&(t.textContent=o),a=p(_),d=n(_,"P",{class:!0});var y=c(d);w=A(y,m),y.forEach(u),_.forEach(u),this.h()},h(){s(t,"class","text-sm font-medium text-gray-600"),s(d,"class","text-lg font-semibold text-gray-700")},m(g,_){G(g,l,_),r(l,t),r(l,a),r(l,d),r(d,w)},p(g,_){_[0]&1&&m!==(m=St(g[0].net)+"")&&R(w,m)},d(g){g&&u(l)}}}function us(e){let l,t,o,a,d,m,w,g,_,y,v,C,E,I="API Key *",b,f,T,L,D='Get your API key from <a href="https://kite.trade/" target="_blank" class="text-blue-600 hover:underline">kite.trade</a>',x,B,H,j="API Secret *",_e,M,U,W,Z=e[10]?"üôà":"üëÅÔ∏è",me,q,Ee,ve,Ze="Redirect URL",Q,K,Ce,ye,be,Re="Postback URL (Optional)",xe,X,$e,Te,Ie,ct=e[5]?"Saving...":"Save",wt,Bt,ke,ft=e[8].connected?"Disconnect":"Connect Broker",Et,Ct,It,Mt,le,je,zt="Market Hours Configuration",Ut,Dt,xt,ee,Ne,qe,Se,k="Market Open Time",O,P,Be,pt,et,Jl="Market Close Time",wl,Ke,El,ht,_t,Ql="Trading Days",Cl,bt,Il,Me,gt,Xl='<div class="font-medium text-gray-900">Real-time Updates (Webhook)</div> <p class="text-sm text-gray-600">Webhook is automatically enabled during market hours for instant order updates</p>',Dl,tt,Zl="Webhook URL (Optional)",xl,Ve,Tl,lt,mt,$l='<div class="font-medium text-gray-900">API Polling (Outside Market Hours)</div> <p class="text-sm text-gray-600">API polling is automatically enabled outside market hours to fetch order status periodically</p>',Vl,ze,rt,er="Polling Interval (seconds)",Ll,we,Pl,vt,tr="Minimum 60 seconds, recommended 300",Hl,Tt,We,Ot=e[12]?"Saving...":"Save Market Hours",Wt,Al,$,st,yt,lr="Holidays Management",Nl,ot,De,Ye,rr="2024",Ge,sr="2025",Je,or="2026",Sl,Qe,Ft,Rt=e[20]?"‚úï":"+",Yt,Bl,jt=e[20]?"Cancel":"Add Holiday",Gt,Ml,Jt,Qt,Xt,Ul,Xe,ge,at,nt,Ol,Fl,Le,Vt,ar="üì•",Rl,qt=e[2]?"Downloading...":"Download",Zt,jl,$t,el,ql,Kl,nr,re=e[7]&&Er(e),se=e[6]&&Cr(e);function ir(Y,V){return Y[10]?rs:ls}let tl=ir(e),Pe=tl(e),oe=e[13]&&Ir(e),ae=e[14]&&Dr(e),Lt=kl(e[22]),te=[];for(let Y=0;Y<Lt.length;Y+=1)te[Y]=xr(wr(e,Lt,Y));let ne=e[18]&&Tr(e),ie=e[17]&&Vr(e),ue=e[20]&&Lr(e);function ur(Y,V){return Y[16]?as:Y[15].length===0?os:ss}let ll=ur(e),He=ll(e),de=e[1]&&Ar(e),ce=e[4]&&Nr(e),fe=e[3]&&Sr(e);function dr(Y,V){if(Y[2])return is;if(Y[1])return ns}let Pt=dr(e),pe=Pt&&Pt(e),he=e[0]&&Br(e);return{c(){l=i("div"),t=i("div"),o=i("div"),a=i("h2"),d=N(`Kite Connect Configuration
							`),m=i("div"),g=h(),re&&re.c(),_=h(),se&&se.c(),y=h(),v=i("form"),C=i("div"),E=i("label"),E.textContent=I,b=h(),f=i("input"),T=h(),L=i("p"),L.innerHTML=D,x=h(),B=i("div"),H=i("label"),H.textContent=j,_e=h(),M=i("div"),Pe.c(),U=h(),W=i("button"),me=N(Z),q=h(),Ee=i("div"),ve=i("label"),ve.textContent=Ze,Q=h(),K=i("input"),Ce=h(),ye=i("div"),be=i("label"),be.textContent=Re,xe=h(),X=i("input"),$e=h(),Te=i("div"),Ie=i("button"),wt=N(ct),Bt=h(),ke=i("button"),Et=N(ft),Mt=h(),le=i("div"),je=i("h2"),je.textContent=zt,Ut=h(),oe&&oe.c(),Dt=h(),ae&&ae.c(),xt=h(),ee=i("form"),Ne=i("div"),qe=i("div"),Se=i("label"),Se.textContent=k,O=h(),P=i("input"),Be=h(),pt=i("div"),et=i("label"),et.textContent=Jl,wl=h(),Ke=i("input"),El=h(),ht=i("div"),_t=i("div"),_t.textContent=Ql,Cl=h(),bt=i("div");for(let Y=0;Y<te.length;Y+=1)te[Y].c();Il=h(),Me=i("div"),gt=i("div"),gt.innerHTML=Xl,Dl=h(),tt=i("label"),tt.textContent=Zl,xl=h(),Ve=i("input"),Tl=h(),lt=i("div"),mt=i("div"),mt.innerHTML=$l,Vl=h(),ze=i("div"),rt=i("label"),rt.textContent=er,Ll=h(),we=i("input"),Pl=h(),vt=i("p"),vt.textContent=tr,Hl=h(),Tt=i("div"),We=i("button"),Wt=N(Ot),Al=h(),$=i("div"),st=i("div"),yt=i("h2"),yt.textContent=lr,Nl=h(),ot=i("div"),De=i("select"),Ye=i("option"),Ye.textContent=rr,Ge=i("option"),Ge.textContent=sr,Je=i("option"),Je.textContent=or,Sl=h(),Qe=i("button"),Ft=i("span"),Yt=N(Rt),Bl=h(),Gt=N(jt),Ml=h(),ne&&ne.c(),Jt=h(),ie&&ie.c(),Qt=h(),ue&&ue.c(),Xt=h(),He.c(),Ul=h(),Xe=i("div"),ge=i("div"),at=i("div"),nt=i("h2"),Ol=N(`üì• Instrument Data
								`),de&&de.c(),Fl=h(),Le=i("button"),Vt=i("span"),Vt.textContent=ar,Rl=h(),Zt=N(qt),jl=h(),ce&&ce.c(),$t=h(),fe&&fe.c(),el=h(),pe&&pe.c(),ql=h(),he&&he.c(),this.h()},l(Y){l=n(Y,"DIV",{class:!0});var V=c(l);t=n(V,"DIV",{class:!0});var z=c(t);o=n(z,"DIV",{class:!0});var Ae=c(o);a=n(Ae,"H2",{class:!0});var zl=c(a);d=A(zl,`Kite Connect Configuration
							`),m=n(zl,"DIV",{class:!0}),c(m).forEach(u),zl.forEach(u),g=p(Ae),re&&re.l(Ae),_=p(Ae),se&&se.l(Ae),y=p(Ae),v=n(Ae,"FORM",{class:!0});var Ue=c(v);C=n(Ue,"DIV",{});var Ht=c(C);E=n(Ht,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),S(E)!=="svelte-14vmx18"&&(E.textContent=I),b=p(Ht),f=n(Ht,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),T=p(Ht),L=n(Ht,"P",{class:!0,"data-svelte-h":!0}),S(L)!=="svelte-5xi9v0"&&(L.innerHTML=D),Ht.forEach(u),x=p(Ue),B=n(Ue,"DIV",{});var rl=c(B);H=n(rl,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),S(H)!=="svelte-q7faeu"&&(H.textContent=j),_e=p(rl),M=n(rl,"DIV",{class:!0});var sl=c(M);Pe.l(sl),U=p(sl),W=n(sl,"BUTTON",{type:!0,class:!0});var cr=c(W);me=A(cr,Z),cr.forEach(u),sl.forEach(u),rl.forEach(u),q=p(Ue),Ee=n(Ue,"DIV",{});var ol=c(Ee);ve=n(ol,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),S(ve)!=="svelte-skvl48"&&(ve.textContent=Ze),Q=p(ol),K=n(ol,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),ol.forEach(u),Ce=p(Ue),ye=n(Ue,"DIV",{});var al=c(ye);be=n(al,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),S(be)!=="svelte-1jomirl"&&(be.textContent=Re),xe=p(al),X=n(al,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),al.forEach(u),$e=p(Ue),Te=n(Ue,"DIV",{class:!0});var nl=c(Te);Ie=n(nl,"BUTTON",{type:!0,class:!0});var fr=c(Ie);wt=A(fr,ct),fr.forEach(u),Bt=p(nl),ke=n(nl,"BUTTON",{type:!0,class:!0});var pr=c(ke);Et=A(pr,ft),pr.forEach(u),nl.forEach(u),Ue.forEach(u),Ae.forEach(u),Mt=p(z),le=n(z,"DIV",{class:!0});var it=c(le);je=n(it,"H2",{class:!0,"data-svelte-h":!0}),S(je)!=="svelte-ka9akk"&&(je.textContent=zt),Ut=p(it),oe&&oe.l(it),Dt=p(it),ae&&ae.l(it),xt=p(it),ee=n(it,"FORM",{class:!0});var Oe=c(ee);Ne=n(Oe,"DIV",{class:!0});var il=c(Ne);qe=n(il,"DIV",{});var ul=c(qe);Se=n(ul,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),S(Se)!=="svelte-1ym1keb"&&(Se.textContent=k),O=p(ul),P=n(ul,"INPUT",{id:!0,type:!0,class:!0}),ul.forEach(u),Be=p(il),pt=n(il,"DIV",{});var dl=c(pt);et=n(dl,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),S(et)!=="svelte-40wiyx"&&(et.textContent=Jl),wl=p(dl),Ke=n(dl,"INPUT",{id:!0,type:!0,class:!0}),dl.forEach(u),il.forEach(u),El=p(Oe),ht=n(Oe,"DIV",{});var cl=c(ht);_t=n(cl,"DIV",{class:!0,"data-svelte-h":!0}),S(_t)!=="svelte-8grmb8"&&(_t.textContent=Ql),Cl=p(cl),bt=n(cl,"DIV",{class:!0});var hr=c(bt);for(let Yl=0;Yl<te.length;Yl+=1)te[Yl].l(hr);hr.forEach(u),cl.forEach(u),Il=p(Oe),Me=n(Oe,"DIV",{class:!0});var At=c(Me);gt=n(At,"DIV",{class:!0,"data-svelte-h":!0}),S(gt)!=="svelte-1x3wa33"&&(gt.innerHTML=Xl),Dl=p(At),tt=n(At,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),S(tt)!=="svelte-1qv9jgd"&&(tt.textContent=Zl),xl=p(At),Ve=n(At,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),At.forEach(u),Tl=p(Oe),lt=n(Oe,"DIV",{class:!0});var fl=c(lt);mt=n(fl,"DIV",{class:!0,"data-svelte-h":!0}),S(mt)!=="svelte-t1htdh"&&(mt.innerHTML=$l),Vl=p(fl),ze=n(fl,"DIV",{});var Nt=c(ze);rt=n(Nt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),S(rt)!=="svelte-118cwx4"&&(rt.textContent=er),Ll=p(Nt),we=n(Nt,"INPUT",{id:!0,type:!0,min:!0,max:!0,step:!0,class:!0}),Pl=p(Nt),vt=n(Nt,"P",{class:!0,"data-svelte-h":!0}),S(vt)!=="svelte-5c4xig"&&(vt.textContent=tr),Nt.forEach(u),fl.forEach(u),Hl=p(Oe),Tt=n(Oe,"DIV",{class:!0});var _r=c(Tt);We=n(_r,"BUTTON",{type:!0,class:!0});var br=c(We);Wt=A(br,Ot),br.forEach(u),_r.forEach(u),Oe.forEach(u),it.forEach(u),Al=p(z),$=n(z,"DIV",{class:!0});var Fe=c($);st=n(Fe,"DIV",{class:!0});var pl=c(st);yt=n(pl,"H2",{class:!0,"data-svelte-h":!0}),S(yt)!=="svelte-tnqj9n"&&(yt.textContent=lr),Nl=p(pl),ot=n(pl,"DIV",{class:!0});var hl=c(ot);De=n(hl,"SELECT",{class:!0});var _l=c(De);Ye=n(_l,"OPTION",{"data-svelte-h":!0}),S(Ye)!=="svelte-1p1p0dm"&&(Ye.textContent=rr),Ge=n(_l,"OPTION",{"data-svelte-h":!0}),S(Ge)!=="svelte-1913zg6"&&(Ge.textContent=sr),Je=n(_l,"OPTION",{"data-svelte-h":!0}),S(Je)!=="svelte-1smxaly"&&(Je.textContent=or),_l.forEach(u),Sl=p(hl),Qe=n(hl,"BUTTON",{class:!0});var bl=c(Qe);Ft=n(bl,"SPAN",{});var gr=c(Ft);Yt=A(gr,Rt),gr.forEach(u),Bl=p(bl),Gt=A(bl,jt),bl.forEach(u),hl.forEach(u),pl.forEach(u),Ml=p(Fe),ne&&ne.l(Fe),Jt=p(Fe),ie&&ie.l(Fe),Qt=p(Fe),ue&&ue.l(Fe),Xt=p(Fe),He.l(Fe),Fe.forEach(u),Ul=p(z),Xe=n(z,"DIV",{class:!0});var gl=c(Xe);ge=n(gl,"DIV",{class:!0});var ut=c(ge);at=n(ut,"DIV",{class:!0});var ml=c(at);nt=n(ml,"H2",{class:!0});var Wl=c(nt);Ol=A(Wl,`üì• Instrument Data
								`),de&&de.l(Wl),Wl.forEach(u),Fl=p(ml),Le=n(ml,"BUTTON",{class:!0});var vl=c(Le);Vt=n(vl,"SPAN",{"data-svelte-h":!0}),S(Vt)!=="svelte-18xxwx0"&&(Vt.textContent=ar),Rl=p(vl),Zt=A(vl,qt),vl.forEach(u),ml.forEach(u),jl=p(ut),ce&&ce.l(ut),$t=p(ut),fe&&fe.l(ut),el=p(ut),pe&&pe.l(ut),ut.forEach(u),ql=p(gl),he&&he.l(gl),gl.forEach(u),z.forEach(u),V.forEach(u),this.h()},h(){s(m,"class",w="w-4 h-4 rounded-full "+(e[8].connected?"bg-green-500":"bg-red-500")),s(a,"class","text-xl font-bold mb-4 text-gray-900 flex items-center gap-2"),s(E,"for","api-key"),s(E,"class","block text-sm font-medium text-gray-700 mb-1"),s(f,"id","api-key"),s(f,"type","text"),f.required=!0,s(f,"placeholder","Enter your Kite API Key"),s(f,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"),s(L,"class","text-xs text-gray-600 mt-1"),s(H,"for","api-secret"),s(H,"class","block text-sm font-medium text-gray-700 mb-1"),s(W,"type","button"),s(W,"class","absolute right-3 top-3 text-gray-600 hover:text-gray-900"),s(M,"class","relative"),s(ve,"for","redirect-url"),s(ve,"class","block text-sm font-medium text-gray-700 mb-1"),s(K,"id","redirect-url"),s(K,"type","text"),s(K,"placeholder","https://your-domain.com/api/broker/callback"),s(K,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"),s(be,"for","postback-url"),s(be,"class","block text-sm font-medium text-gray-700 mb-1"),s(X,"id","postback-url"),s(X,"type","text"),s(X,"placeholder","https://your-domain.com/api/broker/postback"),s(X,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"),s(Ie,"type","submit"),Ie.disabled=e[5],s(Ie,"class","px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 w-32"),s(ke,"type","button"),ke.disabled=Ct=e[5]||!e[8].connected&&(!e[9].api_key||!e[9].api_secret),s(ke,"class",It="px-6 py-2 "+(e[8].connected?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700")+" text-white rounded-lg disabled:opacity-50 w-32"),s(Te,"class","flex gap-3 pt-4"),s(v,"class","space-y-4"),s(o,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6"),s(je,"class","text-xl font-bold mb-4 text-gray-900"),s(Se,"for","market-open-time"),s(Se,"class","block text-sm font-medium text-gray-700 mb-1"),s(P,"id","market-open-time"),s(P,"type","time"),s(P,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"),s(et,"for","market-close-time"),s(et,"class","block text-sm font-medium text-gray-700 mb-1"),s(Ke,"id","market-close-time"),s(Ke,"type","time"),s(Ke,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"),s(Ne,"class","grid grid-cols-2 gap-4"),s(_t,"class","block text-sm font-medium text-gray-700 mb-2"),s(bt,"class","flex flex-wrap gap-2"),s(gt,"class","mb-3"),s(tt,"for","webhook-url"),s(tt,"class","block text-sm font-medium text-gray-700 mb-1"),s(Ve,"id","webhook-url"),s(Ve,"type","text"),s(Ve,"placeholder","https://your-domain.com/api/webhook/kite-postback"),s(Ve,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"),s(Me,"class","border-t pt-6"),s(mt,"class","mb-3"),s(rt,"for","polling-interval"),s(rt,"class","block text-sm font-medium text-gray-700 mb-1"),s(we,"id","polling-interval"),s(we,"type","number"),s(we,"min","60"),s(we,"max","3600"),s(we,"step","60"),s(we,"class","w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"),s(vt,"class","text-xs text-gray-600 mt-1"),s(lt,"class","border-t pt-6"),s(We,"type","submit"),We.disabled=e[12],s(We,"class","px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50"),s(Tt,"class","flex gap-3 pt-4"),s(ee,"class","space-y-6"),s(le,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6"),s(yt,"class","text-xl font-bold text-gray-900"),Ye.__value=2024,F(Ye,Ye.__value),Ge.__value=2025,F(Ge,Ge.__value),Je.__value=2026,F(Je,Je.__value),s(De,"class","px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"),e[19]===void 0&&zr(()=>e[43].call(De)),s(Qe,"class","px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2"),s(ot,"class","flex gap-3 items-center"),s(st,"class","flex justify-between items-center mb-4"),s($,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6"),s(nt,"class","text-lg font-bold text-gray-900 flex items-center gap-2"),Le.disabled=e[2],s(Le,"class","px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 text-sm flex items-center gap-1"),s(at,"class","flex items-center justify-between mb-4"),s(ge,"class","bg-white rounded-lg shadow-sm border border-gray-200 p-6"),s(Xe,"class","grid grid-cols-1 gap-6"),s(t,"class","grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"),s(l,"class","px-8 py-6")},m(Y,V){G(Y,l,V),r(l,t),r(t,o),r(o,a),r(a,d),r(a,m),r(o,g),re&&re.m(o,null),r(o,_),se&&se.m(o,null),r(o,y),r(o,v),r(v,C),r(C,E),r(C,b),r(C,f),F(f,e[9].api_key),r(C,T),r(C,L),r(v,x),r(v,B),r(B,H),r(B,_e),r(B,M),Pe.m(M,null),r(M,U),r(M,W),r(W,me),r(v,q),r(v,Ee),r(Ee,ve),r(Ee,Q),r(Ee,K),F(K,e[9].redirect_url),r(v,Ce),r(v,ye),r(ye,be),r(ye,xe),r(ye,X),F(X,e[9].postback_url),r(v,$e),r(v,Te),r(Te,Ie),r(Ie,wt),r(Te,Bt),r(Te,ke),r(ke,Et),r(t,Mt),r(t,le),r(le,je),r(le,Ut),oe&&oe.m(le,null),r(le,Dt),ae&&ae.m(le,null),r(le,xt),r(le,ee),r(ee,Ne),r(Ne,qe),r(qe,Se),r(qe,O),r(qe,P),F(P,e[11].start_time),r(Ne,Be),r(Ne,pt),r(pt,et),r(pt,wl),r(pt,Ke),F(Ke,e[11].end_time),r(ee,El),r(ee,ht),r(ht,_t),r(ht,Cl),r(ht,bt);for(let z=0;z<te.length;z+=1)te[z]&&te[z].m(bt,null);r(ee,Il),r(ee,Me),r(Me,gt),r(Me,Dl),r(Me,tt),r(Me,xl),r(Me,Ve),F(Ve,e[11].webhook_url),r(ee,Tl),r(ee,lt),r(lt,mt),r(lt,Vl),r(lt,ze),r(ze,rt),r(ze,Ll),r(ze,we),F(we,e[11].polling_interval_seconds),r(ze,Pl),r(ze,vt),r(ee,Hl),r(ee,Tt),r(Tt,We),r(We,Wt),r(t,Al),r(t,$),r($,st),r(st,yt),r(st,Nl),r(st,ot),r(ot,De),r(De,Ye),r(De,Ge),r(De,Je),mr(De,e[19],!0),r(ot,Sl),r(ot,Qe),r(Qe,Ft),r(Ft,Yt),r(Qe,Bl),r(Qe,Gt),r($,Ml),ne&&ne.m($,null),r($,Jt),ie&&ie.m($,null),r($,Qt),ue&&ue.m($,null),r($,Xt),He.m($,null),r(t,Ul),r(t,Xe),r(Xe,ge),r(ge,at),r(at,nt),r(nt,Ol),de&&de.m(nt,null),r(at,Fl),r(at,Le),r(Le,Vt),r(Le,Rl),r(Le,Zt),r(ge,jl),ce&&ce.m(ge,null),r(ge,$t),fe&&fe.m(ge,null),r(ge,el),pe&&pe.m(ge,null),r(Xe,ql),he&&he.m(Xe,null),Kl||(nr=[J(f,"input",e[32]),J(W,"click",e[35]),J(K,"input",e[36]),J(X,"input",e[37]),J(ke,"click",function(){Qr(e[8].connected?e[25]:e[24])&&(e[8].connected?e[25]:e[24]).apply(this,arguments)}),J(v,"submit",Gl(e[23])),J(P,"input",e[38]),J(Ke,"input",e[39]),J(Ve,"input",e[41]),J(we,"input",e[42]),J(ee,"submit",Gl(e[26])),J(De,"change",e[43]),J(Qe,"click",e[44]),J(Le,"click",e[30])],Kl=!0)},p(Y,V){if(e=Y,V[0]&256&&w!==(w="w-4 h-4 rounded-full "+(e[8].connected?"bg-green-500":"bg-red-500"))&&s(m,"class",w),e[7]?re?re.p(e,V):(re=Er(e),re.c(),re.m(o,_)):re&&(re.d(1),re=null),e[6]?se?se.p(e,V):(se=Cr(e),se.c(),se.m(o,y)):se&&(se.d(1),se=null),V[0]&512&&f.value!==e[9].api_key&&F(f,e[9].api_key),tl===(tl=ir(e))&&Pe?Pe.p(e,V):(Pe.d(1),Pe=tl(e),Pe&&(Pe.c(),Pe.m(M,U))),V[0]&1024&&Z!==(Z=e[10]?"üôà":"üëÅÔ∏è")&&R(me,Z),V[0]&512&&K.value!==e[9].redirect_url&&F(K,e[9].redirect_url),V[0]&512&&X.value!==e[9].postback_url&&F(X,e[9].postback_url),V[0]&32&&ct!==(ct=e[5]?"Saving...":"Save")&&R(wt,ct),V[0]&32&&(Ie.disabled=e[5]),V[0]&256&&ft!==(ft=e[8].connected?"Disconnect":"Connect Broker")&&R(Et,ft),V[0]&800&&Ct!==(Ct=e[5]||!e[8].connected&&(!e[9].api_key||!e[9].api_secret))&&(ke.disabled=Ct),V[0]&256&&It!==(It="px-6 py-2 "+(e[8].connected?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700")+" text-white rounded-lg disabled:opacity-50 w-32")&&s(ke,"class",It),e[13]?oe?oe.p(e,V):(oe=Ir(e),oe.c(),oe.m(le,Dt)):oe&&(oe.d(1),oe=null),e[14]?ae?ae.p(e,V):(ae=Dr(e),ae.c(),ae.m(le,xt)):ae&&(ae.d(1),ae=null),V[0]&2048&&F(P,e[11].start_time),V[0]&2048&&F(Ke,e[11].end_time),V[0]&138414080){Lt=kl(e[22]);let z;for(z=0;z<Lt.length;z+=1){const Ae=wr(e,Lt,z);te[z]?te[z].p(Ae,V):(te[z]=xr(Ae),te[z].c(),te[z].m(bt,null))}for(;z<te.length;z+=1)te[z].d(1);te.length=Lt.length}V[0]&2048&&Ve.value!==e[11].webhook_url&&F(Ve,e[11].webhook_url),V[0]&2048&&qr(we.value)!==e[11].polling_interval_seconds&&F(we,e[11].polling_interval_seconds),V[0]&4096&&Ot!==(Ot=e[12]?"Saving...":"Save Market Hours")&&R(Wt,Ot),V[0]&4096&&(We.disabled=e[12]),V[0]&524288&&mr(De,e[19]),V[0]&1048576&&Rt!==(Rt=e[20]?"‚úï":"+")&&R(Yt,Rt),V[0]&1048576&&jt!==(jt=e[20]?"Cancel":"Add Holiday")&&R(Gt,jt),e[18]?ne?ne.p(e,V):(ne=Tr(e),ne.c(),ne.m($,Jt)):ne&&(ne.d(1),ne=null),e[17]?ie?ie.p(e,V):(ie=Vr(e),ie.c(),ie.m($,Qt)):ie&&(ie.d(1),ie=null),e[20]?ue?ue.p(e,V):(ue=Lr(e),ue.c(),ue.m($,Xt)):ue&&(ue.d(1),ue=null),ll===(ll=ur(e))&&He?He.p(e,V):(He.d(1),He=ll(e),He&&(He.c(),He.m($,null))),e[1]?de?de.p(e,V):(de=Ar(e),de.c(),de.m(nt,null)):de&&(de.d(1),de=null),V[0]&4&&qt!==(qt=e[2]?"Downloading...":"Download")&&R(Zt,qt),V[0]&4&&(Le.disabled=e[2]),e[4]?ce?ce.p(e,V):(ce=Nr(e),ce.c(),ce.m(ge,$t)):ce&&(ce.d(1),ce=null),e[3]?fe?fe.p(e,V):(fe=Sr(e),fe.c(),fe.m(ge,el)):fe&&(fe.d(1),fe=null),Pt===(Pt=dr(e))&&pe?pe.p(e,V):(pe&&pe.d(1),pe=Pt&&Pt(e),pe&&(pe.c(),pe.m(ge,null))),e[0]?he?he.p(e,V):(he=Br(e),he.c(),he.m(Xe,null)):he&&(he.d(1),he=null)},i:yl,o:yl,d(Y){Y&&u(l),re&&re.d(),se&&se.d(),Pe.d(),oe&&oe.d(),ae&&ae.d(),Rr(te,Y),ne&&ne.d(),ie&&ie.d(),ue&&ue.d(),He.d(),de&&de.d(),ce&&ce.d(),fe&&fe.d(),pe&&pe.d(),he&&he.d(),Kl=!1,jr(nr)}}}function Or(e){return new Date(e+"T00:00:00").toLocaleDateString("en-IN",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}function Fr(e){return e?new Date(e).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never"}function ds(e,l,t){let o;Wr(e,Kt,k=>t(31,o=k));let a=null,d=null,m=[],w=null,g=null,_=!1,y=null,v=null,C=!1,E=null,I=null,b={connected:!1,broker_type:"kite",api_key:"",access_token:"",token_expired:!1},f={broker_type:"kite",api_key:"",api_secret:"",redirect_url:"",postback_url:"",access_token:""},T=!1,L=null,D=null,x={start_time:"09:15",end_time:"15:30",trading_days:[0,1,2,3,4],webhook_url:"",polling_interval_seconds:300},B=!1,H=null,j=null,_e=[],M=!1,U=null,W=null,Z=new Date().getFullYear(),me=!1,q={date:"",name:"",description:""};const Ee=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];Yr(async()=>{await ve(),w=setInterval(async()=>{await Kt.loadStatus("kite")},3e4)}),Gr(()=>{D&&clearInterval(D),w&&clearInterval(w)});async function ve(){try{await Kt.loadStatus("kite"),await Q(),await Ze(),await be(),await X(),Ie().catch(Be=>{console.error("Error loading instrument status:",Be)});const k=await $r.getFundSummary();t(0,a=k.data),d=(await es.getSummary()).data,m=(await ts.getOpen()).data}catch(k){console.error("Error loading dashboard:",k)}finally{}}async function Ze(){t(5,C=!0);try{const k=await dt.getEnvConfig("kite");k.data&&t(9,f={...f,api_key:k.data.api_key||"",api_secret:k.data.api_secret||"",redirect_url:k.data.redirect_url||"",postback_url:k.data.postback_url||""}),await dt.initConfig("kite")}catch(k){console.error("Error loading env config:",k)}finally{t(5,C=!1)}}async function Q(){t(5,C=!0);try{await Kt.loadStatus("kite"),Kt.subscribe(P=>{t(8,b={connected:P.connected,broker_type:P.brokerType,api_key:"",access_token:"",token_expired:!1})})();const O=await dt.getConfig("kite");O.data&&t(9,f={...f,...O.data})}catch(k){console.error("Error loading broker status:",k)}finally{t(5,C=!1)}}async function K(){var k,O;t(5,C=!0),t(6,E=null),t(7,I=null);try{await dt.createConfig(f),await dt.updateEnvConfig("kite",{api_key:f.api_key,api_secret:f.api_secret,redirect_url:f.redirect_url,postback_url:f.postback_url}),t(7,I="Broker configuration saved successfully!"),await Q(),setTimeout(()=>t(7,I=null),3e3)}catch(P){console.error("Error saving broker config:",P),t(6,E=((O=(k=P.response)==null?void 0:k.data)==null?void 0:O.detail)||"Failed to save broker configuration")}finally{t(5,C=!1)}}async function Ce(){var k,O;t(5,C=!0),t(6,E=null);try{await dt.createConfig(f);const Be=(await dt.getAuthUrl("kite")).data.auth_url;L=window.open(Be,"KiteAuth","width=800,height=600,scrollbars=yes"),L?(t(7,I="Please complete the authentication in the popup window."),D=setInterval(()=>{L&&L.closed&&(clearInterval(D),D=null,Q(),Ze())},1e3)):t(6,E="Failed to open popup. Please allow popups for this site.")}catch(P){console.error("Error getting auth URL:",P),t(6,E=((O=(k=P.response)==null?void 0:k.data)==null?void 0:O.detail)||"Failed to get authentication URL")}finally{t(5,C=!1)}}async function ye(){if(confirm("Are you sure you want to disconnect the broker?")){t(5,C=!0),t(6,E=null),t(7,I=null);try{await dt.disconnect("kite"),t(7,I="Broker disconnected successfully!"),t(9,f.access_token="",f),await Q(),setTimeout(()=>t(7,I=null),3e3)}catch(k){console.error("Error disconnecting broker:",k),t(6,E="Failed to disconnect broker")}finally{t(5,C=!1)}}}async function be(){t(12,B=!0),t(14,j=null);try{const k=await kt.get("http://localhost:8000/api/market-hours");t(11,x=k.data)}catch(k){console.error("Error loading market hours:",k),t(14,j="Failed to load market hours configuration")}finally{t(12,B=!1)}}async function Re(){var k,O;t(12,B=!0),t(14,j=null),t(13,H=null);try{const P=await kt.put("http://localhost:8000/api/market-hours",x);t(13,H="Market hours configuration saved successfully!"),setTimeout(()=>t(13,H=null),3e3)}catch(P){console.error("Error saving market hours:",P),t(14,j=((O=(k=P.response)==null?void 0:k.data)==null?void 0:O.detail)||"Failed to save market hours configuration")}finally{t(12,B=!1)}}function xe(k){x.trading_days.indexOf(k)>-1?t(11,x.trading_days=x.trading_days.filter(P=>P!==k),x):t(11,x.trading_days=[...x.trading_days,k].sort(),x)}async function X(){t(16,M=!0),t(17,U=null);try{const k=Z?`http://localhost:8000/api/market-hours/holidays?year=${Z}`:"http://localhost:8000/api/market-hours/holidays",O=await kt.get(k);t(15,_e=O.data)}catch(k){console.error("Error loading holidays:",k),t(17,U="Failed to load holidays")}finally{t(16,M=!1)}}async function $e(){var k,O;if(!q.date||!q.name){t(17,U="Date and name are required");return}t(16,M=!0),t(17,U=null),t(18,W=null);try{await kt.post("http://localhost:8000/api/market-hours/holidays",q),t(18,W="Holiday added successfully!"),setTimeout(()=>t(18,W=null),3e3),t(21,q={date:"",name:"",description:""}),t(20,me=!1),await X()}catch(P){console.error("Error adding holiday:",P),t(17,U=((O=(k=P.response)==null?void 0:k.data)==null?void 0:O.detail)||"Failed to add holiday")}finally{t(16,M=!1)}}async function Te(k){var O,P;if(confirm(`Are you sure you want to delete the holiday on ${k}?`)){t(16,M=!0),t(17,U=null),t(18,W=null);try{await kt.delete(`http://localhost:8000/api/market-hours/holidays/${k}`),t(18,W="Holiday deleted successfully!"),setTimeout(()=>t(18,W=null),3e3),await X()}catch(Be){console.error("Error deleting holiday:",Be),t(17,U=((P=(O=Be.response)==null?void 0:O.data)==null?void 0:P.detail)||"Failed to delete holiday")}finally{t(16,M=!1)}}}async function Ie(){t(2,_=!0),t(3,y=null);try{const k=await kt.get("http://localhost:8000/api/broker/instruments/status/kite");t(1,g=k.data)}catch(k){console.error("Error loading instrument status:",k),t(3,y="Failed to load instrument status")}finally{t(2,_=!1)}}async function ct(){var k,O;t(2,_=!0),t(3,y=null),t(4,v=null);try{const P=await kt.post("http://localhost:8000/api/broker/instruments/download/kite");t(4,v=`Downloaded ${P.data.count} instruments successfully!`),setTimeout(()=>t(4,v=null),3e3),await Ie()}catch(P){console.error("Error downloading instruments:",P),t(3,y=((O=(k=P.response)==null?void 0:k.data)==null?void 0:O.detail)||"Failed to download instruments")}finally{t(2,_=!1)}}function wt(){f.api_key=this.value,t(9,f)}function Bt(){f.api_secret=this.value,t(9,f)}function ke(){f.api_secret=this.value,t(9,f)}const ft=()=>t(10,T=!T);function Et(){f.redirect_url=this.value,t(9,f)}function Ct(){f.postback_url=this.value,t(9,f)}function It(){x.start_time=this.value,t(11,x)}function Mt(){x.end_time=this.value,t(11,x)}const le=k=>xe(k);function je(){x.webhook_url=this.value,t(11,x)}function zt(){x.polling_interval_seconds=qr(this.value),t(11,x)}function Ut(){Z=Jr(this),t(19,Z)}const Dt=()=>t(20,me=!me);function xt(){q.date=this.value,t(21,q)}function ee(){q.name=this.value,t(21,q)}function Ne(){q.description=this.value,t(21,q)}const qe=()=>{t(20,me=!1),t(21,q={date:"",name:"",description:""})},Se=k=>Te(k.date);return e.$$.update=()=>{e.$$.dirty[1]&1&&o&&(t(8,b.connected=o.connected,b),t(8,b.broker_type=o.brokerType,b),t(8,b.token_expired=o.tokenExpired||!1,b))},[a,g,_,y,v,C,E,I,b,f,T,x,B,H,j,_e,M,U,W,Z,me,q,Ee,K,Ce,ye,Re,xe,$e,Te,ct,o,wt,Bt,ke,ft,Et,Ct,It,Mt,le,je,zt,Ut,Dt,xt,ee,Ne,qe,Se]}class bs extends Xr{constructor(l){super(),Zr(this,l,ds,us,Kr,{},null,[-1,-1,-1])}}export{bs as component};
